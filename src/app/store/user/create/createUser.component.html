<section>
  <app-title [tittleName]="'Nuevo Usuario'" />
</section>
<section >
  <div class="px-4">
    <form action="#" method="post" [formGroup]="createUserForm" autocomplete="off" enctype="multipart/form-data">

      <div>
        <label class="block text-sm font-medium text-gray-700" for="name">Nombre</label>
        <input type="text" id="name" formControlName="name" placeholder="Nombre"/>
        @if( createUserForm.get('name')?.invalid && createUserForm.get('name')?.touched ){
          @if(createUserForm.get('name')?.hasError('required')){
            <div class="text-xs text-red-500">El campo es obligatorio</div>
          }
        }
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700" for="lastname">Apellido</label>
        <input type="text" id="lastname" formControlName="lastname" placeholder="Apellido"/>
        @if( createUserForm.get('lastname')?.invalid && createUserForm.get('lastname')?.touched ){
          @if(createUserForm.get('lastname')?.hasError('required')){
            <div class="text-xs text-red-500">El campo es obligatorio</div>
          }
        }
      </div>

      <div class="flex gap-4 mb-4"> <!-- Fila con 2 inputs -->
        <div class="flex-1">
          <label for="ci" class="block text-sm font-medium text-gray-700">CI</label>
          <input
            type="text"
            id="ci"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
            placeholder="CI"
            formControlName="ci"
          />
          @if (createUserForm.get('ci')?.invalid && createUserForm.get('ci')?.touched) {
            @if (createUserForm.get('ci')?.hasError('required')) {
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
            @if (createUserForm.get('ci')?.hasError('pattern')) {
              <div class="text-xs text-red-500">Formato incorrecto</div>
            }
          }
        </div>
        <div class="flex-1">
          <label for="phone" class="block text-sm font-medium text-gray-700">Celular</label>
          <input
            type="text"
            id="phone"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
            plaseholder="Celular"
            formControlName="phone"
          />
          @if( createUserForm.get('phone')?.invalid && createUserForm.get('phone')?.touched ){
            @if(createUserForm.get('phone')?.hasError('required')){
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
            @if(createUserForm.get('phone')?.hasError('pattern')){
              <div class="text-xs text-red-500">Formato incorrecto</div>
            }
          }
        </div>
      </div>


      <div class="flex gap-4 mb-4">
        <div class="flex-1">
          <label form="username" class="block text-sm font-medium text-gray-700">Nombre de Usuario</label>
          <input type="text" id="username" formControlName="username" placeholder="Nombre de Usuario"/>
          @if( createUserForm.get('username')?.invalid && createUserForm.get('username')?.touched ){
            @if(createUserForm.get('username')?.hasError('required')){
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
          }
        </div>

        <div class="flex-1">
          <label form="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
          <input type="password" id="password" formControlName="password" placeholder="Contraseña" />
          @if ( createUserForm.get('password')?.invalid && createUserForm.get('password')?.touched ) {
            @if (createUserForm.get('password')?.hasError('required')) {
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
          }
        </div>
      </div>

      <div class="flex gap-4 mb-4">
        <div class="flex-1">
          <label class="block text-sm font-medium text-gray-700" form="birthdate">Fecha de Naciemiento</label>
          <input type="date" id="birthdate" formControlName="birthdate" placeholder="Fecha de Nacimiento" />
          @if( createUserForm.get('birthdate')?.invalid && createUserForm.get('birthdate')?.touched ){
            @if(createUserForm.get('birthdate')?.hasError('required')){
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
          }
        </div>

        <div class="flex-1">
          <label class="block text-sm font-medium text-gray-700" for="user_type">Tipo de usuario</label>
          <select id="user_type" formControlName="user_type">
            <option value="">--Seleccione--</option>
            <option value="admin">Administrador</option>
            <option value="farma">Farmacéutico</option>
            <option value="cajero">Cajero</option>
            <option value="alma">Almacenista</option>
          </select>
          @if( createUserForm.get('user_type')?.invalid && createUserForm.get('user_type')?.touched ){
            @if(createUserForm.get('user_type')?.hasError('required')){
              <div class="text-xs text-red-500">El campo es obligatorio</div>
            }
          }
        </div>
      </div>

    <div>
      <label class="block text-sm font-medium text-gray-700" for="address">Dirección</label>
      <input type="text" id="address" formControlName="address" placeholder="Dirección" />
      @if( createUserForm.get('address')?.invalid && createUserForm.get('address')?.touched ){
        @if(createUserForm.get('address')?.hasError('required')){
          <div class="text-xs text-red-500">El campo es obligatorio</div>
        }
      }
    </div>

    <div class="mt-2">
      <label class="block text-sm font-medium text-gray-700" for="photo">Foto</label>
      <input type="file" id="photo" formControlName="photo" />
      @if ( createUserForm.get('photo')?.invalid ) {
        <div class="text-xs text-red-500">Seleccione una imagen!</div>
      }
    </div>

    <div class="py-2 flex items-center space-x-4 mt-5">
      <app-button [buttonName]="'Guardar'" [iconName]="'save'"  [buttonColor]="'green'" [typeButton]="'submit'" [disabled]="false" (eventClick)="saveUser()" />
      <app-button [buttonName]="'Cerrar'" [iconName]="'close'" (eventClick)="close()" [buttonColor]="'red'" [disabled]="false" />
    </div>

    </form>
  </div>
</section>
